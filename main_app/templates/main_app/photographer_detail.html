{% extends 'base.html' %}
{% block content%}
<h1>Photographers Details</h1>

<div>
  <div>
    <p>Photographer name: {{photographer.name}}</p>
    <p>Area of expertise: {{photographer.get_area_of_expertise_display}}</p>
    <p>Description:{{photographer.description}}</p>

    {% if not is_client %}
   <a href="{% url 'photographers_update' photographer.id %}">Edit</a>
   <a href="{% url 'photographers_delete' photographer.id %}">Delete</a>
 
  </div>

  <hr>

  <div class="my-clients">
    <h2>My Clients</h2>
    {% if clients %}
        {% for client in clients %}
            <div>
                <!-- Client details -->
                <p>Bride Name: {{ client.bride_name }}</p>
                <p>Groom Name: {{ client.groom_name }}</p>
                <p>Wedding Date: {{ client.wedding_date }}</p>
                <div>
                  {% for message in messages %}
                  {% if message.sender == client %}
                      <p>{{ message.content }} - {{ message.timestamp }}</p>
                  {% endif %}
                 {% endfor %}
                </div>

               
                <form action="{% url 'unassoc_client' photographer.id client.id  %}" method="POST">
                  {% csrf_token %}
                  
                  <button type="submit" class="btn">Remove</button>
                 
                </form>
              
            </div>
        {% endfor %}
    {% else %}
        <h3>No weddings</h3>
    {% endif %}
   
</div>



<hr>
{% if not is_client %}

<div class="available-clients">
  <h2>Available Clients</h2>
  {% if all_clients %}
      {% for client in all_clients %}
          <div>
              <!-- Client details -->
              <p>Bride Name: {{ client.bride_name }}</p>
              <p>Groom Name: {{ client.groom_name }}</p>
              <p>Wedding Date: {{ client.wedding_date }}</p>
              <div>
              {% for message in messages %}
                 {% if message.sender == client %}
                 <p>{{message.content}} - {{message.timestamp}}</p>
                 {% endif %}
              {% endfor %}
              </div>

              {% if not is_client %}
              <form action="{% url 'assoc_client' photographer.id client.id %}" method="POST">
                  {% csrf_token %}
                  <button type="submit" class="btn">Add</button>
              </form>
              {% endif %}

          </div>
      {% endfor %}
  {% else %}
      <h3>No more weddings available</h3>
  {% endif %}
</div>
{% endif %}
  
</div>

{% endif %}
{% endblock %}